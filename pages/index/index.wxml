<!--index.wxml-->
<view class="search-bar-bg">
  <view class="search-bar">
    <input class="search-input" placeholder="æœç´¢ç±»å‹/é‡‘é¢/å¤‡æ³¨" value="{{searchText}}" bindinput="onSearchInput" />
    <text class="search-icon">ğŸ”</text>
  </view>
</view>
<view class="main-bg">
  <view class="summary-card">
    <view class="summary-row">
      <view class="summary-item">
        <text class="summary-label">æ€»æ”¶å…¥</text>
        <text class="summary-amount income">{{totalIncome}}</text>
      </view>
      <view class="summary-item">
        <text class="summary-label">æ€»æ”¯å‡º</text>
        <text class="summary-amount expense">{{totalExpense}}</text>
      </view>
      <view class="summary-item">
        <text class="summary-label">ç»“ä½™</text>
        <text class="summary-amount balance">{{balance}}</text>
      </view>
    </view>
    <view class="date-range-row">
      <picker mode="date" value="{{startDate}}" bindchange="startDateChange">
        <view class="date-range-picker">{{startDate || 'å¼€å§‹æ—¥æœŸ'}}</view>
      </picker>
      <text class="date-range-sep">è‡³</text>
      <picker mode="date" value="{{endDate}}" bindchange="endDateChange">
        <view class="date-range-picker">{{endDate || 'æˆªè‡³æ—¥æœŸ'}}</view>
      </picker>
    </view>
    <view class="sort-row">
      <view class="sort-float" bindtap="showSortAction">
        <view class="sort-btn">
          <text class="sort-icon">â‡…</text>
        </view>
        <view class="sort-label">æ’åº</view>
      </view>
    </view>
  </view>

  <view class="record-list">
    <view class="record-card" wx:for="{{filteredRecords}}" wx:key="id">
      <view class="record-row">
        <view class="record-type {{item.type}}">
          {{item.type === 'income' ? 'æ”¶å…¥' : 'æ”¯å‡º'}}
        </view>
        <view class="record-amount {{item.type}}">
          {{item.type === 'income' ? '+' : '-'}}{{item.amount}}
        </view>
      </view>
      <view class="record-note">{{item.note || 'æ— å¤‡æ³¨'}}</view>
      <view class="record-bottom">
        <view class="record-date">{{item.date}}</view>
        <view class="record-actions">
          <view class="action-btn edit" bindtap="editRecord" data-id="{{item.id}}">ç¼–è¾‘</view>
          <view class="action-btn delete" bindtap="deleteRecord" data-id="{{item.id}}">åˆ é™¤</view>
        </view>
      </view>
    </view>
  </view>

  <view class="empty" wx:if="{{filteredRecords.length === 0}}">
    æš‚æ— è®°å½•
  </view>

  <view class="add-float">
    <view class="add-btn" bindtap="navigateToAdd">
      <text class="iconfont">+</text>
    </view>
    <view class="add-label">æ·»åŠ è´¦å•</view>
  </view>

  <view class="sort-float" bindtap="showSortAction">
    <view class="sort-btn">
      <text class="sort-icon">â‡…</text>
    </view>
    <view class="sort-label">æ’åº</view>
  </view>

  <button class="share-btn" open-type="share">åˆ†äº«ç»™å¥½å‹</button>
</view>

